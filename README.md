# Lab 3 Analysis
##### All results and observations refer to the output produced by running:
##### ./memsim [128-1024] pg-reference.txt [output file]


### Overview of the page fault ratio
In this lab, the C++ program memsim.cpp records the total page faults along with the page fault ratio at intervals of 2000 page faults for the FIFO (First In, First Out), LRU (Least Recently Used), MFU (Most Frequently Used), and Optimal page replacement algorithms. The page fault ratio, usually abbreviated by ùëù in an Effective Access Time (EAT) algorithm, is simply the number of page faults for a given interval divided by the interval, or:
![Page Fault Ratio](http://i.imgur.com/RhFBZFZ.png "Page Fault Ratio")
The page fault ratio represents the miss rate, which is the percent of memory access requests in the given interval that resulted in a page fault due to the requested page not being available in memory. The inverse of the page fault ratio (miss ratio) 1/ùëù is the hit ratio, which is the percent of memory access requests in the given interval that were successful due to the requested page being in memory.


### Discussion of page fault ratios with respect to the frame size
This lab defined a page interval to be 2000 pages. That is, pg-reference.txt contained a reference string with 10,000 pages, so there was a total of five page fault ratios calculated for each algorithm. As a general observation, as the page interval increased, the page fault ratio for each algorithm decreased by varying amounts. There are cases, however, where an increase of a page interval also increased the page fault ratio or did not change it; such cases can be seen in FIFO and LRU algorithms at frame sizes of 128 frames, 256 frames and 512 frames and the MFU algorithm at a frame size of 256 frames. This means that only the Optimal algorithm consistently demonstrated a decrease of the page fault ratio as the page interval increased. It can also be observed that at a frame size of 1024 frames, all four algorithms demonstrate a strict decrease of the page fault ratio as the page interval increases. Even though there are increases in the page fault rate as the page interval increases for some algorithms, B√©l√°dy‚Äôs anomaly never occurs for any of the algorithms: as the frame size increases, the number of page faults for each algorithm at all intervals will also decrease.

When comparing each algorithm at each frame size (128, 256, 512 and 1024 frames), there exhibited no consistently total and strict decrease in the page fault rate for one algorithm with respect to another, except for the Optimal algorithm. That is, at each frame size, at least one algorithm out of the FIFO, LRU and MFU algorithms will go from being better than the other to worse than the other at one or more page intervals. For example, at 128 and 256 frames, the FIFO algorithm is initially better (has a lower page fault rate) than the LRU algorithm. However, at the page interval of 4000 (at 128 frame size) and 3000 (at 256 frame size), both algorithms have the same page fault rate. After these page intervals where the page fault rates of the two algorithms meet each other, the LRU surpasses the FIFO algorithm by maintaining a lower page fault rate for the remainer of the reference string.

However, FIFO and LRU are clearly much better than the MFU algorithm at frame sizes of 128 and 256 frames, as the MFU algorithm has a much higher page fault rate at all page intervals for the entire reference string. The Optimal algorithm on the other hand has a much lower page fault rate than the other three algorithms at all frame sizes and at all page intervals. Regarding the Optimal algorithm it is important to note that the page fault rate decreases overall as the frame size increases, but at frame sizes of 256, 512, and 1024, the page fault rates for the Optimal algorithm at the 2000 page interval are exactly the same, each having a page fault rate of exactly 0.7875. 

The page fault rate in general were much high than I initially expected. This is because the sample data provided by Dr. Ra had page fault ratios ranging from 0.25 to 0.34. The sample data provided by Dr. Ra must have been for a different, 10,000 page reference string, because the reference string given in pgreference.txt gave page fault ratios between 0.47 to 0.97. I verified the correctness of my implementation of all the algorithms by testing it with reference string: 7 0 1 2 0 3 0 4 2 3 0 3 2 1 2 0 1 7 0 1, which is the reference string used as an example in our textbook. My program gave the same total page faults for a frame size of 3 as the textbook gave. But it makes sense why the page fault rate would be so close to 1 in some cases: no pages start off in memory so consistent page faults will occur at first, but only start to decrease once the frame is filled up to maximum capacity.


### Decreasing the page fault ratio
Given the results from running the reference string found in pg-reference.txt, it is clear what to do when we want to decrease the page fault ratio. The absolute best way to achieve a decrease in the page fault ratio for any reference string is not to change the algorithm, but to increase the frame size. It has been explained that decreasing the frame size will always decrease the page fault ratio for any algorithm. However, please note that even though B√©l√°dy‚Äôs anomaly did not occur for the reference string in pg-reference.txt, that does not mean it cannot occur given other reference strings. In general, any reference string like that given in pg-reference.txt will always result in a decrease of the page fault ratio as frame size increases. 

However, simply increasing the frame size will not alone minimize the page fault ratio. To minimize the page fault ratio, we must choose the Optimal algorithm and run it at the highest frame size available. In practice, however, we can only approximate the effect of the Optimal algorithm since it requires we know in advance which pages will be referenced. In most scenarios, we do not know what pages will be referenced in the future. This means that, in practice, the best way to minimize the page fault rate would be to choose the LRU algorithm, as the FIFO and MFU algorithms do not really come close to approximating the Optimal algorithm. It can be observed that the LRU algorithm is the best algorithm to use other than the Optimal algorithm, but the LRU algorithm still falls pretty short of the Optimal algorithm. The only time where the LRU algorithm is not superior to the FIFO and MFU algorithms past the 4000 page interval is at the 6000 interval running at 1024 frames, where the FIFO algorithm briefly has a lower page fault rate than the LRU algorithm.